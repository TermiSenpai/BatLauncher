<Window x:Class="BatLauncher.Views.EditDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Edit Entry"
        Width="500" SizeToContent="Height"
        MaxHeight="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ShowInTaskbar="False">

    <Border Background="#1E1E2E" CornerRadius="12" BorderBrush="#313244" BorderThickness="1">
        <DockPanel>

            <!-- Title bar (fixed top) -->
            <Grid DockPanel.Dock="Top" Margin="24,20,24,0"
                  MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <TextBlock x:Name="DialogTitle" Text="Add Entry"
                           FontSize="20" FontWeight="SemiBold" Foreground="#CDD6F4"/>
            </Grid>

            <!-- Buttons (fixed bottom) -->
            <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal"
                        HorizontalAlignment="Right" Margin="24,16,24,20">
                <Button Content="Cancel"
                        Style="{StaticResource SecondaryButton}"
                        Click="Cancel_Click" Width="90" Margin="0,0,10,0"/>
                <Button Content="Save"
                        Style="{StaticResource PrimaryButton}"
                        Click="Save_Click" Width="90"/>
            </StackPanel>

            <!-- Separator above buttons -->
            <Border DockPanel.Dock="Bottom" Height="1" Background="#313244" Margin="24,0"/>

            <!-- Scrollable content -->
            <ScrollViewer VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled"
                          Margin="24,16,24,12">
                <StackPanel>

                    <!-- Name -->
                    <TextBlock Text="Display Name" Foreground="#A6ADC8" FontSize="12" Margin="0,0,0,6"/>
                    <TextBox x:Name="NameBox"
                             Style="{StaticResource ModernTextBox}"
                             Text="" MaxLength="100"/>

                    <!-- File Path -->
                    <TextBlock Text="Script Path (.bat / .cmd)" Foreground="#A6ADC8" FontSize="12" Margin="0,12,0,6"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="8"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBox x:Name="FilePathBox" Grid.Column="0"
                                 Style="{StaticResource ModernTextBox}"
                                 Text="" IsReadOnly="True"/>
                        <Button Grid.Column="2" Content="Browse"
                                Style="{StaticResource SecondaryButton}"
                                Click="BrowseFile_Click" Width="80"/>
                    </Grid>

                    <!-- Icon -->
                    <TextBlock Text="Custom Icon (optional)" Foreground="#A6ADC8" FontSize="12" Margin="0,12,0,6"/>
                    <StackPanel Orientation="Horizontal">
                        <Border Width="48" Height="48" CornerRadius="8"
                                Background="#313244" BorderBrush="#45475A" BorderThickness="1"
                                Margin="0,0,12,0">
                            <Image x:Name="IconPreview" Stretch="Uniform" Margin="4"/>
                        </Border>
                        <StackPanel VerticalAlignment="Center">
                            <Button Content="Choose Image"
                                    Style="{StaticResource SecondaryButton}"
                                    Click="BrowseIcon_Click" Width="120" Margin="0,0,0,4"/>
                            <Button x:Name="RemoveIconBtn" Content="Remove"
                                    Style="{StaticResource DangerButton}"
                                    Click="RemoveIcon_Click" Width="120"
                                    Visibility="Collapsed"/>
                        </StackPanel>
                    </StackPanel>

                </StackPanel>
            </ScrollViewer>

        </DockPanel>
    </Border>
</Window>
